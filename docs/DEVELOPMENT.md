# 開発者ガイドライン

## ステータス管理

### ユニットステータス

ユニットのステータスは以下の 3 つの状態を持ちます：

- `PLANNED`: 計画中
- `IN_PROGRESS`: 進行中
- `COMPLETED`: 完了

#### データベース

- データベースでは英語のステータス値を使用
- デフォルト値は `PLANNED`
- ステータスは `Unit` モデルの `status` フィールドに保存

#### フロントエンド

- 表示時は `translateUnitStatus` 関数を使用して日本語に翻訳
- フォームでの選択肢は日本語で表示
- 送信時は英語のステータス値を使用

### 型定義

- `UnitStatus`: ステータスの型定義（`src/types/unit.ts`）
- `BaseUnit`: ユニットの基本型
- `DbUnit`: データベースモデル用の型
- `ApiUnit`: API レスポンス用の型
- `UnitForm`: フォーム用の型

### 翻訳

- 翻訳は `src/utils/i18n.ts` で管理
- 新しいステータスを追加する場合は、`unitStatusMessages` に翻訳を追加

## 開発フロー

1. 機能開発

   - 新しい機能は feature ブランチで開発
   - コミットメッセージは日本語で記述
   - コミット前にリンターを実行

2. コードレビュー

   - PR を作成する前に自己レビューを実施
   - レビューコメントは日本語で記述
   - レビュー後、必要に応じて修正を実施

3. マージ
   - レビュー承認後、main ブランチにマージ
   - マージ後、必要に応じてデプロイを実施

## テスト

### 単体テスト

- ユーティリティ関数のテスト
- 型変換のテスト
- バリデーションのテスト

### 統合テスト

- API エンドポイントのテスト
- データベース操作のテスト
- 認証・認可のテスト

### E2E テスト

- ユーザーフローのテスト
- エッジケースのテスト
- パフォーマンステスト

## デプロイ

### ステージング環境

- 開発環境でのテスト完了後、ステージング環境にデプロイ
- ステージング環境でのテスト完了後、本番環境にデプロイ

### 本番環境

- 本番環境へのデプロイは慎重に実施
- デプロイ後、動作確認を実施
- 問題が発生した場合は、ロールバックを実施

## トラブルシューティング

### よくある問題

1. ステータスの不一致

   - データベースとフロントエンドでステータス値が一致しているか確認
   - 翻訳が正しく設定されているか確認

2. 型エラー

   - 型定義が正しいか確認
   - 型変換が正しく行われているか確認

3. パフォーマンス問題
   - データベースクエリの最適化
   - キャッシュの活用
   - インデックスの確認

### サポート

- 問題が発生した場合は、Issue を作成
- 緊急時は、チームチャットで連絡
- ドキュメントの更新が必要な場合は、PR を作成
